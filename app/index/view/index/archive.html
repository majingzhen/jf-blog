<?php
// view/index/archive.html
View::share('title', $title ?? '');
View::share('keywords', $keywords ?? '');
View::share('description', $description ?? '');
?>

<!-- 主要内容 -->
<div class="row">
    <div class="col-md-8">
        <h2>文章归档</h2>
        <?php
        foreach ($archiveData as $yearMonth => $postsInMonth):
            $year = substr($yearMonth, 0, 4);
            $month = substr($yearMonth, 5, 2);
        ?>
            <h3><?php echo $year; ?> 年 <?php echo $month; ?> 月</h3>
            <ul>
            <?php foreach ($postsInMonth as $post): ?>
                <li>
                    <a href="<?php echo url('index.Index/post', ['slug' => $post['slug']]); ?>"><?php echo htmlspecialchars($post['title']); ?></a>
                    <span class="text-muted">- <?php echo $post['published_at_text']; ?></span>
                </li>
            <?php endforeach; ?>
            </ul>
        <?php endforeach; ?>
    </div>
    <div class="col-md-4">
        <!-- 侧边栏 -->
        <div class="card">
            <div class="card-header">
                <h5>分类</h5>
            </div>
            <div class="card-body">
                <?php
                $categories = \app\model\Category::select();
                foreach ($categories as $category):
                ?>
                    <div><a href="<?php echo url('index.Index/category', ['slug' => $category['slug']]); ?>"><?php echo htmlspecialchars($category['name']); ?></a></div>
                <?php endforeach; ?>
            </div>
        </div>

        <div class="card mt-3">
            <div class="card-header">
                <h5>标签</h5>
            </div>
            <div class="card-body">
                <?php
                $tags = \app\model\Tag::select();
                foreach ($tags as $tag):
                ?>
                    <a href="<?php echo url('index.Index/tag', ['slug' => $tag['slug']]); ?>" class="badge bg-light text-dark text-decoration-none m-1"><?php echo htmlspecialchars($tag['name']); ?></a>
                <?php endforeach; ?>
            </div>
        </div>
    </div>
</div>