{extend name="layout/main" /}

{block name="title"}文章管理 - JF-Blog 后台{/block}

{block name="page_title"}文章管理{/block}

{block name="content"}
<div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3">
    <div class="btn-toolbar mb-2 mb-md-0">
        <div class="btn-group me-2">
            <a href="{:url('/admin/post/create')}" class="btn btn-sm btn-outline-secondary">
                <i class="fas fa-plus"></i> 新建文章
            </a>
        </div>
    </div>
</div>

<div class="table-responsive">
    <table class="table table-striped table-sm">
        <thead>
            <tr>
                <th>ID</th>
                <th>标题</th>
                <th>分类</th>
                <th>发布时间</th>
                <th>状态</th>
                <th>操作</th>
            </tr>
        </thead>
        <tbody>
            {volist name="posts" id="post"}
            <tr>
                <td>{$post.id}</td>
                <td>{$post.title}</td>
                <td>{$post.category.name|default='未分类'}</td>
                <td>{$post.created_at|date='Y-m-d H:i:s'}</td>
                <td><span class="badge bg-{$post.status=='published'?'success':'warning'}">{$post.status_text}</span></td>
                <td>
                    <a href="{:url('/admin/post/edit', ['id'=>$post.id])}" class="btn btn-sm btn-outline-primary">编辑</a>
                    <a href="{:url('/admin/post/delete', ['id'=>$post.id])}" class="btn btn-sm btn-outline-danger" onclick="return confirm('确定要删除这篇文章吗？')">删除</a>
                </td>
            </tr>
            {/volist}
        </tbody>
    </table>
    <div class="pagination">
        {$posts|raw}
    </div>
</div>
{/block}