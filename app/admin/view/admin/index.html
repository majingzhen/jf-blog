{extend name="layout/main" /}

{block name="title"}仪表盘 - JF-Blog 后台{/block}

{block name="page_title"}仪表盘{/block}

{block name="content"}
<div class="row mb-4">
    <div class="col-md-3">
        <div class="card text-white bg-primary">
            <div class="card-body">
                <h5 class="card-title">文章总数</h5>
                <p class="card-text display-4">
                    {php}
                    echo \app\model\Post::count();
                    {/php}
                </p>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="card text-white bg-success">
            <div class="card-body">
                <h5 class="card-title">分类总数</h5>
                <p class="card-text display-4">
                    {php}
                    echo \app\model\Category::count();
                    {/php}
                </p>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="card text-white bg-warning">
            <div class="card-body">
                <h5 class="card-title">标签总数</h5>
                <p class="card-text display-4">
                    {php}
                    echo \app\model\Tag::count();
                    {/php}
                </p>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="card text-white bg-info">
            <div class="card-body">
                <h5 class="card-title">已发布文章</h5>
                <p class="card-text display-4">
                    {php}
                    echo \app\model\Post::where('status', 'published')->count();
                    {/php}
                </p>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-md-8">
        <div class="card">
            <div class="card-header">
                <h3 class="card-title">最近发布的文章</h3>
            </div>
            <div class="table-responsive">
                <table class="table table-striped table-sm">
                    <thead>
                    <tr>
                        <th>标题</th>
                        <th>分类</th>
                        <th>发布时间</th>
                    </tr>
                    </thead>
                    <tbody>
                    {volist name="posts" id="post" length="5"}
                    <tr>
                        <td>{$post.title}</td>
                        <td>{$post.category.name}</td>
                        <td>{$post.published_at|default='未发布'}</td>
                    </tr>
                    {/volist}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <div class="col-md-4">
        <div class="card">
            <div class="card-header">
                <h3 class="card-title">快速操作</h3>
            </div>
            <div class="card-body">
                <a class="btn btn-primary btn-block mb-2" href="{:url('/admin/post/create')}">新建文章</a>
                <a class="btn btn-success btn-block mb-2" href="{:url('/admin/category/create')}">新建分类</a>
                <a class="btn btn-info btn-block mb-2" href="{:url('/admin/tag/create')}">新建标签</a>
                <a class="btn btn-warning btn-block" href="{:url('/admin/config/index')}">系统配置</a>
            </div>
        </div>
    </div>
</div>
{/block}